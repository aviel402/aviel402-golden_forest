
<!DOCTYPE html>
<html lang="he" dir="rtl"><head><meta charset="UTF-8"><title>העיירה - יער הזהב</title><link rel="stylesheet" href="/style.css"></head>
<body>
    <div class="game-container"><header class="status-bar"><h2>שלום, <span id="player-email">טוען...</span>!</h2><div id="character-stats"><p class="status-item">רמה: <span id="level">...</span></p><p class="status-item">ניסיון: <span id="xp">...</span></p><p class="status-item">זהב: <span id="gold">...</span></p></div></header><main class="actions-menu"><h1>העיירה</h1><p>מה תרצה לעשות?</p><button id="adventureBtn">צא להרפתקה (בפיתוח)</button><button id="logoutBtn">התנתק</button></main></div>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const playerId = localStorage.getItem('player_id');
            if (!playerId) { window.location.href = '/index.html'; return; }
            try {
                const response = await fetch(`/api/character-data?player_id=${playerId}`);
                const data = await response.json();
                if (!response.ok) { throw new Error(data.error); }
                document.getElementById('player-email').textContent = data.email;
                document.getElementById('level').textContent = data.level;
                document.getElementById('xp').textContent = data.xp;
                document.getElementById('gold').textContent = data.gold;
            } catch (error) { window.location.href = '/index.html'; }
            document.getElementById('logoutBtn').addEventListener('click', () => {
                localStorage.removeItem('player_id');
                window.location.href = '/index.html';
            });
        });
    </script>
</body>
</html>